<p-table [value]="collection$ | async" [selection]="itemsSelected$ | async" (selectionChange)="onSelectionChange($event)">
  <ng-template pTemplate="header">
    <tr>
      <th style="width: 3rem">
        <p-tableHeaderCheckbox></p-tableHeaderCheckbox>
      </th>
      <th style="width: 10em" pSortableColumn="color">color</th>
      <th>property</th>
      <th>styleRule</th>
      <th style="width: 10em" >varName</th>
    </tr>
    <tr>
      <th></th>
      <th>
        <p-columnFilter field="color" matchMode="equals" [showMenu]="false">
          <ng-template pTemplate="filter" let-value let-filter="filterCallback">
            <p-dropdown [ngModel]="value" [options]="colors$ | async" (onChange)="filter($event.value)" placeholder="Any" [showClear]="true">
              <ng-template pTemplate="selectedItem" let-item>
                <div class="flex align-items-center">
                  <div class="mr-2" style="display:inline-block; height: 20px; width: 20px; border: solid 1px black" [ngStyle]="{'background-color': item.value}"></div>
                  <span>{{item.value}}</span>
                </div>
              </ng-template>
              <ng-template let-item pTemplate="item">
                <div class="flex align-items-center">
                  <div class="mr-2" style="display:inline-block; height: 20px; width: 20px; border: solid 1px black" [ngStyle]="{'background-color': item.value}"></div>
                  <span>{{item.value}}</span>
                </div>
              </ng-template>
            </p-dropdown>
          </ng-template>
        </p-columnFilter>
      </th>
      <th>
        <p-columnFilter field="property" matchMode="equals" [showMenu]="false">
          <ng-template pTemplate="filter" let-value let-filter="filterCallback">
            <p-dropdown [ngModel]="value" [options]="properties$ | async" (onChange)="filter($event.value)" placeholder="Any" [showClear]="true">
              <ng-template pTemplate="selectedItem" let-item>
                <div class="flex align-items-center">
                  <span>{{item.value}}</span>
                </div>
              </ng-template>
              <ng-template let-item pTemplate="item">
                <div class="flex align-items-center">
                  <span>{{item.value}}</span>
                </div>
              </ng-template>
            </p-dropdown>
          </ng-template>
        </p-columnFilter>
      </th>
      <th>styleRule</th>
      <th>varName</th>
    </tr>
  </ng-template>
  <ng-template pTemplate="body" let-item>
    <tr>
      <td>
        <p-tableCheckbox [value]="item"></p-tableCheckbox>
      </td>
      <td>
        <div style="display:inline-block; height: 20px; width: 20px; border: solid 1px black" [ngStyle]="{'background-color': item.color}"></div>
        {{item.color}}
      </td>
      <td>{{item.property}}</td>
      <td>{{item.styleRule}}</td>
      <td>{{item.varName}}</td>
    </tr>
  </ng-template>
</p-table>
